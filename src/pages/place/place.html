<ion-header no-border>

  <ion-navbar color="header">

    <ion-buttons start>
      <button ion-button icon-only clear navPop>
        <ion-icon name="close"></ion-icon>
      </button>
    </ion-buttons>

    <ion-title>{{ placeName }}</ion-title>

    <ion-buttons end>
      <button ion-button icon-only clear (click)="onFindPlace()">
        <ion-icon name="md-map"></ion-icon>
      </button>
      <button ion-button icon-only (click)="onSaveFavorite()" [disabled]="favoriteIsSaved">
        <ion-icon name="heart"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>

  <ion-toolbar color="header">
    <ion-segment [(ngModel)]="placeInfo" color="light">
      <ion-segment-button value="weather" isActive>
        Väder
      </ion-segment-button>
      <ion-segment-button value="quality">
        Badvattenkvalité
      </ion-segment-button>
      <ion-segment-button value="reviews" (click)="getPlaceReviews()">
        Omdömen
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

</ion-header>

<ion-content padding no-bounce class="gradient-background">

  <ion-grid no-padding>
    <ion-row align-items-center>
      <ion-col>
        <div [ngSwitch]="placeInfo">

          <div *ngSwitchCase="'weather'" id="weather-container">
            <div *ngIf="weatherDataIsFetched">

              <img src="../../../assets/img/weather-icons/large/{{icon}}.png" />
              <h1>{{ temperature }}</h1>
              <h2>{{ summary }}</h2>

              <h3>
                {{ dailyData.summary }} Solen kommer gå ner Kl. {{ dailyData.sunsetTime }}
              </h3>

              <ion-scroll scrollX="true">
                <ul *ngFor="let hour of weatherByHours" id="hourly-container">
                  <li class="hour">{{ hour.h }}</li>
                  <li><img src="../../../assets/img/weather-icons/{{icon}}.png" /></li>
                  <li class="temperature">{{ hour.t }}°</li>
                </ul>
              </ion-scroll>

              <!-- Absolute position -->
              <img src="../../assets/img/darksky-logo.png" class="darksky-img" (click)="onVisitDarkSky()" />

            </div>
          </div>

          <div *ngSwitchCase="'quality'" id="quality-container">

            <img src="../../assets/img/place-quality.png" id="quality-icon" />

            <div id="stars-container">

              <div *ngIf="classification == 'Utmärkt kvalitet'">
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
              </div>

              <div *ngIf="classification == 'Bra kvalitet'">
                <ion-icon name="star"></ion-icon>
                <ion-icon name="star"></ion-icon>
              </div>

              <div *ngIf="classification == 'Tillfredsställande kvalitet'">
                <ion-icon name="star"></ion-icon>
              </div>

            </div>

            <h1>Klassificering</h1>
            <h2>{{ classification }}</h2>

            <h3>EU-bad</h3>
            <h4>{{ euBath }}</h4>

            <h5>Gäller för</h5>
            <h6>{{ year }}</h6>

          </div>

          <div *ngSwitchCase="'reviews'" id="reviews-container">

            <ion-spinner name="bubbles" *ngIf="!reviewsList && !reviewsNotFound"></ion-spinner>

            <div *ngIf="reviewsNotFound">
              <img src="../../assets/img/rating.png" class="rating-icon" />
              <h2>Det finns inga omdömen för badplatsen</h2>
            </div>

            <div *ngIf="reviewsList">

              <div>
                <p>Snittbetyg: {{ overallRating }}/5</p>
                <p>Baserat på {{ reviewsList.length }} omdömen</p>
              </div>

              <ion-slides>
                <ion-slide *ngFor="let review of reviewsList">
                  <ion-card>
                    <ion-item>
                      <ion-avatar item-start>
                        <img src="{{review.profile_photo_url}}">
                      </ion-avatar>
                      <h2>{{ review.author_name }}</h2>
                      <p>Betyg: {{ review.rating }}/5</p>
                    </ion-item>
                    <ion-card-content>
                      {{ review.text }}
                    </ion-card-content>
                    <p>Skrevs {{ review.relative_time_description }}</p>
                  </ion-card>
                </ion-slide>
              </ion-slides>

            </div>

          </div>
        </div>

      </ion-col>
    </ion-row>
  </ion-grid>

</ion-content>
